{% extends 'recipes/base.html' %}
{% block title %}Register | RecipeShare{% endblock %}

{% block content %}
<div class="d-flex justify-content-center">
  <div class="card shadow p-4" style="max-width: 500px; width: 100%;">
    <h2 class="mb-4 text-center">Create an Account</h2>
    <form method="post">
      {% csrf_token %}
      <div class="mb-3">
        <label for="id_username" class="form-label">Username</label>
        <input type="text" name="username" class="form-control" id="id_username" required>
        <div class="form-text">Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.</div>
      </div>

      <div class="mb-3 position-relative">
        <label for="id_password1" class="form-label">Password</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
          <input type="password" name="password1" class="form-control" id="id_password1" required>
          <button class="btn btn-outline-secondary toggle-password" type="button" data-target="id_password1">
            <i class="bi bi-eye"></i>
          </button>
        </div>
        <ul class="form-text small mt-1">
          <li>Your password can’t be too similar to your other personal information.</li>
          <li>It must contain at least 8 characters.</li>
          <li>It can’t be a commonly used password.</li>
          <li>It can’t be entirely numeric.</li>
        </ul>
      </div>

      <div class="mb-3 position-relative">
        <label for="id_password2" class="form-label">Confirm Password</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
          <input type="password" name="password2" class="form-control" id="id_password2" required>
          <button class="btn btn-outline-secondary toggle-password" type="button" data-target="id_password2">
            <i class="bi bi-eye"></i>
          </button>
        </div>
        <div class="form-text">Enter the same password as before, for verification.</div>
      </div>

      <button type="submit" class="btn btn-success w-100">Register</button>
    </form>

    <p class="mt-3 text-center">Already have an account? <a href="{% url 'login' %}">Login</a></p>
  </div>
</div>

<!-- Show/Hide Password Script -->
<script>
  document.querySelectorAll('.toggle-password').forEach(button => {
    button.addEventListener('click', function () {
      const input = document.getElementById(this.dataset.target);
      const icon = this.querySelector('i');
      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('bi-eye');
        icon.classList.add('bi-eye-slash');
      } else {
        input.type = 'password';
        icon.classList.remove('bi-eye-slash');
        icon.classList.add('bi-eye');
      }
    });
  });
</script>
{% endblock %}
